@model GuildCars.UI.Models.SpecialsVM

@{
    ViewBag.Title = "Specials";
}
<div class="container">
    <h2>Specials</h2>
    @if (User.IsInRole("Admin"))
    {
        <div class="row">
            <div class="col-md-12">
                @using (Html.BeginForm("AddSpecial", "Home", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                {
                    @Html.AntiForgeryToken()
                    <hr />
                    @Html.ValidationSummary("", new { @class = "text-danger" })
                    <div class="form-group">
                        @Html.LabelFor(m => m.newSpecial.SpecialName, new { @class = "col-md-2 control-label" })
                        <div class="col-md-10">
                            @Html.TextBoxFor(m => m.newSpecial.SpecialName, new { @class = "form-control" })
                        </div>
                    </div>
                    <div class="form-group">
                        @Html.LabelFor(m => m.newSpecial.Description, new { @class = "col-md-2 control-label" })
                        <div class="col-md-10">
                            @Html.TextAreaFor(m => m.newSpecial.Description, new { @class = "form-control" })
                        </div>
                    </div>
                    //Add File Upload for image
                    <div class="form-group">
                        <div class="col-md-offset-2 col-md-10">
                            <input type="submit" class="btn btn-primary" value="Add Special" />
                        </div>
                    </div>
                }
            </div>
        </div>
    }
    <hr />

    @foreach (var special in Model.Specials)
    {
        <div class="card" style="padding:15px; background-color: cornsilk">

            <div class="row">

                <div class="col-sm-1">
                    <img src="~/Images/Specials/@special.ImageFileName" alt="@special.ImageFileName" style="max-height: 50px" />
                </div>
                <div class="col-sm-11">
                    <div class="row">
                        <div class="col-sm-10">
                            <h2 style="text-align: center">@special.SpecialName</h2>
                        </div>
                        @if (User.IsInRole("Admin"))
                        {
                            <div class="col-sm-2">
                                <button class="btn btn-danger" data-toggle="modal" data-target="#deleteSpecialModal" data-special="@special.SpecialId">Delete</button>
                            </div>
                            <div class="modal fade" id="deleteSpecialModal" tabindex="-1" role="dialog" aria-labelledby="deleteSpecialModalLable" aria-hidden="true">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="deleteSpecialModalLable">Delete Special?</h5>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            Are you sure you want to delete this special?
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                            @Html.ActionLink("Delete", "DeleteSpecial", "Home", new { special.SpecialId }, new { @class = "btn btn-danger" })
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                    <div class="col-sm-10">
                        <p style="text-align:center">@special.Description</p>
                    </div>

                </div>
            </div>
        </div>
        <br />
    }
</div>

